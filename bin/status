#!/bin/bash
if command -v realpath >/dev/null 2>&1; then
    SCRIPTS="$(dirname $(realpath "${BASH_SOURCE[0]}" 2>/dev/null))"
elif command -v readlink >/dev/null 2>&1 \
    && readlink --canonicalize-existing ~ >/dev/null 2>&1; then
    SCRIPTS="$(dirname $(readlink --canonicalize-existing "${BASH_SOURCE[0]}"))"
else
    SCRIPTS=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd -P)
    if [ "${SCRIPTS}" == "${HOME}" ]; then echo "Where am I"; exit 1; fi
fi
. "${SCRIPTS}"/../conf/bashrc --short

session() {
    if [[ ! $(ps -fA | grep 'build session server start' | grep -c '') -ge 2 ]]; then
        nohup build session server start > /dev/null 2>&1
    fi
}

a="$1"
shift;
if [ "${a}" == "session" ]; then
    session "$@"
fi
